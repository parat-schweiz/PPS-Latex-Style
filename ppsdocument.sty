% !TEX encoding = UTF-8 Unicode
%-------------------------------------------------------
% Author: Christian Häusler
% Email: christian.haeusler@piratenpartei.ch
%-------------------------------------------------------

\ProvidesPackage{ppsdocument}[2011/11/01 v 0.1 (Christian 'Corvus' Häusler)]

\RequirePackage{ppsbasic}

% -----------------------------------
% Schrift und Absatz
% -----------------------------------
\ifxetex
	\setkomafont{pagenumber}{\Allerlight}
	\setkomafont{pagefoot}{\Allerlight}
	\setkomafont{sectioning}{\Allerbold}
	\setkomafont{pageheadfoot}{\Allerlight}
\else
	% nothing
\fi

% -----------------------------------
% Grafiken
% -----------------------------------
\AddToShipoutPicture{\wellen}

% -----------------------------------
% Kopf- und fusszeile
% -----------------------------------
\RequirePackage{scrpage2}
\KOMAoptions{headinclude=true}
\KOMAoptions{footinclude=false}
\KOMAoptions{headlines=3}
\KOMAoptions{pagesize}
\recalctypearea

\pagestyle{scrheadings}

\ihead[\headerlogo]{\headerlogo}
\ohead[%
	\textbf{\@title}%

	\vspace{1em}%
	\scriptsize \@author\\\@date%
]{%
	\textbf{\@title}%

	\vspace{1em}%
	\scriptsize \@author\\\@date%
}

\setheadsepline{0.01em}

\deftripstyle{title}{\headerlogo}{}{}{}{\pagemark}{}


\renewenvironment{titlepage}{
	\ClearShipoutPicture
	\AddToShipoutPicture*{
		\begin{tikzpicture}
			\draw (0,0) -- (0,0);
			\draw [color=orange, fill=orange](\ta@bcor+1cm,1cm) rectangle (\paperwidth-1cm,\paperheight-1cm);
		\end{tikzpicture}}
}{
	\begin{flushright}
		\vfill\titlelogo
	\end{flushright}
	\thispagestyle{empty}
	\newpage
	\AddToShipoutPicture{\wellen}
}

\renewcommand{\maketitle}{
	\thispagestyle{title}
	\if@titlepage\vspace*{\tpagemargin}\else\fi
	\begin{flushright}
	{\Huge\name\\\large\@title}

	\vspace{3em}{\raggedleft\scriptsize\@author\hspace{1em}\@date}
	\end{flushright}
	\vspace{2em}
}

