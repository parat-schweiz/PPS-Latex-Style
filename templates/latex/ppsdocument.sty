% !TEX encoding = UTF-8 Unicode
%-------------------------------------------------------
% Author: Christian Häusler
% Email: christian.haeusler@piratenpartei.ch
%-------------------------------------------------------

\ProvidesPackage{ppsdocument}[2011/11/01 v1.0 (Christian 'Corvus' Häusler)]

\RequirePackage{ppsbasic}

% -----------------------------------
% Schrift und Absatz
% -----------------------------------
\setkomafont{pagefoot}{\upshape}
\setkomafont{pagehead}{\upshape}
\setkomafont{sectioning}{\bfseries}

\KOMAoptions{fontsize=11pt}

% -----------------------------------
% Grafiken
% -----------------------------------
\AddToShipoutPicture{\wellen}

% -----------------------------------
% Kopf- und fusszeile
% -----------------------------------
\RequirePackage[automark]{scrpage2}
\KOMAoptions{headinclude=true}
\KOMAoptions{footinclude=false}
\KOMAoptions{headlines=3}
\KOMAoptions{pagesize}
\recalctypearea

\clearscrheadfoot
\pagestyle{scrheadings}

\setlength{\marginparwidth}{2.1em}
\setheadwidth[0pt]{textwithmarginpar}

\ihead[\smalllogost]{\smalllogost}
\rohead[
	\raisebox{0em}{
		\begin{tabular}[t]{rp{\marginparwidth-0.7em}}
			\scriptsize & \\
			\textbf{\@title}   & \hfill \pagemark\\
			\hline
		\end{tabular}
	}
]{
	\raisebox{0em}{
		\begin{tabular}[t]{rp{\marginparwidth-0.7em}}
			\textbf{\@title} & \\
			\scriptsize \headmark & \hfill\pagemark\\
			\hline
		\end{tabular}
	}
}
\lehead[
	\raisebox{0em}{
		\begin{tabular}[t]{p{\marginparwidth-0.7em}l}
			& \scriptsize \\
			\pagemark & \textbf{\@title}   \\
			\hline
		\end{tabular}
	}
]{
	\raisebox{0em}{
		\begin{tabular}[t]{p{\marginparwidth-0.7em}l}
			& \textbf{\@title} \\
			\pagemark & \scriptsize \headmark \\
			\hline
		\end{tabular}
	}
}
\ifoot[%
	\scriptsize \ppsnamelong { }| \@author { }| \@date%
]{%
	\scriptsize \ppsnamelong { }| \@author { }| \@date%
}

%\setheadsepline{0.01em}

\deftripstyle{title}{\headerlogo}{}{}{}{}{}


\renewenvironment{titlepage}{
	\ClearShipoutPicture
	\AddToShipoutPicture*{
		\begin{tikzpicture}
			\draw (0,0) -- (0,0);
			\draw [color=orange, fill=orange](\ta@bcor+1cm,1cm) rectangle (\paperwidth-1cm,\paperheight-1cm);
		\end{tikzpicture}}
}{
	\begin{flushright}
		\vfill\biglogonego
	\end{flushright}
	\thispagestyle{empty}
	\newpage
	\AddToShipoutPicture{\wellen}
}

\renewcommand{\maketitle}{
	\thispagestyle{title}
	\if@titlepage\vspace*{\tpagemargin}\else\fi
	\begin{flushright}
	{\Huge\ppsname\par\large\@title}
	\par
	\vspace{3em}{\raggedleft\scriptsize\@author\hspace{1em}\@date}
	\end{flushright}
	\vspace{2em}
}

\newcommand{\backgrounddefault}{}

\newcommand{\backgroundorange}{}

\newcommand{\backgroundgrey}{}

\newcommand{\backgroundviolet}{}

\backgrounddefault
